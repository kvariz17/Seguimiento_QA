{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>üìä Actualizar Progreso</h2>
            <a href="{{ url_for('projects.project_detail', project_id=project.id) }}" class="btn btn-outline-secondary">
                ‚Üê Volver al Detalle
            </a>
        </div>
        <hr>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-info text-white">
                <h4 class="card-title mb-0">Proyecto: {{ project.name }}</h4>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label for="progress" class="form-label fw-bold">% Avance *</label>
                        <input type="number" class="form-control" id="progress" name="progress" 
                               value="{{ project.progress }}" min="0" max="100" required>
                        <div class="form-text">Porcentaje de 0 a 100</div>
                    </div>

                    <div class="mb-3">
                        <label for="status" class="form-label fw-bold">Estado *</label>
                        <select class="form-select" id="status" name="status" required>
                            {% for status in statuses %}
                            <option value="{{ status }}" {% if project.status == status %}selected{% endif %}>{{ status }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="executed_cases" class="form-label fw-bold">Casos Ejecutados</label>
                        <input type="number" class="form-control" id="executed_cases" name="executed_cases" 
                               value="{{ project.executed_cases or 0 }}" min="0">
                        <div class="form-text">N√∫mero de casos de prueba ejecutados</div>
                    </div>
					<!-- Agregar despu√©s del campo "Casos Ejecutados" -->
<div class="mb-3">
    <label for="test_cases" class="form-label fw-bold">Casos de Prueba</label>
    <input type="number" class="form-control" id="test_cases" name="test_cases" 
           value="{{ project.test_cases or 0 }}" min="0">
    <div class="form-text">N√∫mero total de casos de prueba definidos</div>
</div>
                    <div class="mb-3">
                        <label for="observation" class="form-label fw-bold">Observaci√≥n</label>
                        <textarea class="form-control" id="observation" name="observation" 
                                  rows="4" placeholder="Agrega observaciones sobre el progreso del proyecto...">{{ project.observation or '' }}</textarea>
                        <div class="form-text">Informaci√≥n adicional sobre el estado del proyecto (visible para supervisores)</div>
                    </div>

                    <div class="alert alert-warning">
                        <strong>‚ö†Ô∏è Importante:</strong> Esta actualizaci√≥n quedar√° registrada en el historial de cambios.
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{{ url_for('projects.project_detail', project_id=project.id) }}" 
                           class="btn btn-outline-secondary me-md-2">‚ùå Cancelar</a>
                        <button type="submit" class="btn btn-primary">üíæ Actualizar Progreso</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}